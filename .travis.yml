sudo: false

language: objective-c
os: osx
osx_image: xcode9.1

cache: false

addons:
  sauce_connect:
    username: silkimen
  jwt: TwUj8A5qAR53BRhVwcdLCM64kI+f8beOLbZ2VmLJ557ptGAxvkHrhQ19uLEQakL64SWoeznObJjTG/Sp8zbO6O9xkfTw5mbNPk7FBTMd77x62l/PHZSWuwiFEVPfLnG2jSGWBqrLxr/g8cIiruzHSXS9J4C86SYIKIGnz9atJxB7XswwzAkvmyzgzC6iRCFhoAgmnhtY+Xr+QHcbpESoiUPv/MQ8CFNpk65CX+fuvVunWX70e3Qlelcs7nkbF/soFwD1WExCbTaPlaNvKqBIc1YuO4qdNy4Uff4mZZLsARH0X618EwFAVN4VM7AIqeUp3NoQYDw9vpkR7lmoOUJzI0aovasXa8frDNvm8GSP17jtCTQzfYEMK+B9rIA9oBRd46dyGujZtbKoTpDdTMIe0ayqb38NRuNwDzEV7WVMCcUgux0Q8NIAkWYYb21QN9z7XOOznP7BatK7mlJ0V6J7taBW2EBOwQzHWRG7n9GknGXsPzwxDW6aBCiOem/AcxZkajDPcRu/3diq5ZSZcC7cTVBxCZZCqpPCsZH0l47jW8MNh+CYw+i5TGsp7g0YHVmbWzE8dv73tMD9zQP0pUjOSkY55xbS7kTCXvFqP0OdMccpzdZY5h7JER95tIPz3gZwVFCoBg0GvwTqTxhGKR+jNosUD2n6WhCVFAU+AspgCKo=

before_install:
- export LANG=en_US.UTF-8
- brew update

install:
- npm install
- brew install gradle
- wget http://dl.google.com/android/android-sdk_r24.4-macosx.zip
- tar -xvf android-sdk_r24.4-macosx.zip
- echo y | ./android-sdk-macosx/tools/android update sdk --no-ui --all --filter platform-tools
- echo y | ./android-sdk-macosx/tools/android update sdk --no-ui --all --filter build-tools-25.0.0
- echo y | ./android-sdk-macosx/tools/android update sdk --no-ui --all --filter android-25
- echo y | ./android-sdk-macosx/tools/android update sdk --no-ui --all --filter extra-android-support
- echo y | ./android-sdk-macosx/tools/android update sdk --no-ui --all --filter extra-android-m2repository
- echo y | ./android-sdk-macosx/tools/android update sdk --no-ui --all --filter extra-google-m2repository
- export ANDROID_HOME=./android-sdk-macosx
- export PATH=${PATH}:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools/23.0.2

script:
- node_modules/.bin/cordova prepare
- node_modules/.bin/cordova build android
- node_modules/.bin/cordova build ios
- scripts/upload-artifacts.sh
- scripts/test.sh --ios --emulator

after_success:

deploy:

notifications:
  slack:
    secure: RPpLR38m6W0SYjJdPyDth5yUFfBwMt8B/1CsptyxZLQJRtUlTKKJb4SBwdsO58qmtVsH+B09Nd46haiMgUk+LjvRlZt8nHzOWiz+54t0I5x8YZnHxqAan6HSi9HW1yZAWfFUXmGtXYJrM/s9FI+E/Fcv20DoR5RFzNjV0fHgsXmvHSwycLAtvds6Y/GNXuSqJpY52S6xYrUqSw17+bOKb8+F8uZhLrg0ffVkuJdTvw7MOVq4ATstdrl+BMeIpGBA9/XQsZ2eRvk2ftUUMTOoXRPiIfEhSoF9Cbgew2FRt28p9w2bcbmQX0XAsI7Px5UupZgr0QBLiK9LKSLeGZbRHIkObT+vLLc0WvEPedZaEBHDJn/e4uY96/fnjZKqcE/2Xwn30ZqhqzMP/eVZClm/OtB5EFbLRW/QCzEc/QN/IDPgRmdcsXACjDZacALbXR81TFih+udRabvLtc56gdkp/0wb0qGD4aF/WdB+I+Y4j6VtCBh/ETX31Ea+pR9LhHto0HZMUG0hPDqSztHmv5gtTmtYu+9Bm+puqP53eJ4cyATlX3Zo3MxWWaW92iCZUDNHMOyjdhtajoxVtMR/hbUO1EDZB+bAFUDKQBIuwmYZhKw4Y4MhQGEH03QKWlmBRDqM2JaE/wO2rt79ew3JQHNhBBMTuW1djtTPJj3MrlNK2Bk=
